"use strict";function randomString(e){e=e||16;for(var t="abcdefghijklmnopqrstuvwxyz123456789",a=t.length,r="",o=0;o<e;o++)r+=t.charAt(Math.floor(Math.random()*a));return r}function autoPlayAudio(){wx.config({debug:!1,appId:"",timestamp:1,nonceStr:"",signature:"",jsApiList:[]}),wx.ready(function(){document.getElementById("audio").play()})}var ua=navigator.userAgent.toLowerCase(),isWeixin="micromessenger"==ua.match(/MicroMessenger/i);isWeixin||(document.querySelector(".tip-mask").style.display="block");var localstroage=window.localStorage;if(console.log(localstroage.getItem("userKey")),!localstroage.getItem("userKey")){var key=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],text="%E5%91%B5%E5%91%B5"+randomString(16),textBytes=aesjs.utils.utf8.toBytes(text),aesCtr=new aesjs.ModeOfOperation.ctr(key,new aesjs.Counter(5)),encryptedBytes=aesCtr.encrypt(textBytes),encryptedHex=aesjs.utils.hex.fromBytes(encryptedBytes);console.log(encryptedHex);var currKey=randomString(16);localstroage.setItem("userKey",encryptedHex)}autoPlayAudio(),ajax.get("/api/finished",{},function(e){"Object"!=typeof e&&(e=JSON.parse(e)),console.log(e),e.status?e.data&&(document.querySelector(".tip-mask").style.display="block",document.querySelector(".tip-mask p").innerText="活动已结束～"):alert(e.data)});